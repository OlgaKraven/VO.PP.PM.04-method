<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Техническое задание — Система аренды спортивного инвентаря</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- ваш общий стиль -->
  <link rel="stylesheet" href="styles.css" />

  <!-- границы таблиц -->
  <style>
    table { width: 100%; border-collapse: collapse; margin: 12px 0; }
    th, td { border: 1px solid #cfcfcf; padding: 6px 8px; vertical-align: top; }
    th { background: #f7f7f9; text-align: left; }
    caption { caption-side: top; text-align: left; font-weight: 600; margin: 6px 0; }
    code { background: #f6f8fa; padding: 1px 4px; border-radius: 3px; }
    nav a { margin-right: 10px; }
    .note { font-style: italic; color: #555; }
  </style>

  <!-- Mermaid -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad: true, securityLevel: 'loose' });</script>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>2. Техническое задание</h1>
      <div class="subtitle">на разработку программного продукта «Система аренды спортивного инвентаря»</div>
      <nav>
        <a href="#gen">2.1 Общие сведения</a>
        <a href="#purpose">2.2 Назначение</a>
        <a href="#terms">2.3 Термины</a>
        <a href="#func">2.4 Функциональные требования</a>
        <a href="#nfunc">2.5 Нефункциональные</a>
        <a href="#data">2.6 Данные</a>
        <a href="#ui">2.7 UI</a>
        <a href="#limits">2.8 Ограничения</a>
        <a href="#ops">2.9 Эксплуатация</a>
        <a href="#delivery">2.10 Поставка</a>
        <a href="#reliab">2.11 Надёжность</a>
        <a href="#qa">2.12 Приёмка</a>
        <a href="#rtm">2.13 Трассируемость</a>
        <a href="#handoff">2.14 Порядок сдачи</a>
      </nav>
    </header>

    <section id="gen">
      <h2>2.1. Общие сведения</h2>
      <table>
        <tbody>
          <tr><th>Исполнитель</th><td>студенческая команда (1–2 человека)</td></tr>
          <tr><th>Заказчик</th><td>учебная группа/кафедра</td></tr>
          <tr><th>Основание</th><td>учебный план по дисциплине «Основы программирования (C#)»</td></tr>
          <tr>
            <th>Стадии работ</th>
            <td>
              анализ → проектирование → реализация → испытания → сдача
              <div class="note">Схема стадий ниже (Mermaid):</div>
              <pre class="mermaid">
flowchart LR
  A[Анализ] --> B[Проектирование]
  B --> C[Реализация]
  C --> D[Испытания]
  D --> E[Сдача]
              </pre>
            </td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="purpose">
      <h2>2.2. Назначение и область применения</h2>
      <p>Программный продукт предназначен для автоматизации учёта аренды спортивного инвентаря (велосипеды, ролики, коньки, лыжи и др.) в небольшом пункте проката. Система обеспечивает оформление выдачи и возврата, расчёт стоимости по тарифам, фиксацию штрафов, ведение справочников клиентов и инвентаря, формирование базовых отчётов.</p>
    </section>

    <section id="terms">
      <h2>2.3. Термины и сокращения</h2>
      <ul>
        <li><strong>Единица инвентаря (Item)</strong> — конкретный объект проката с инвентарным номером.</li>
        <li><strong>Договор/Аренда (Rental)</strong> — запись о выдаче/возврате одной единицы инвентаря клиенту.</li>
        <li><strong>ТО (Maintenance)</strong> — техническое обслуживание/ремонт.</li>
        <li><strong>CRUD</strong> — операции создания/чтения/изменения/удаления.</li>
      </ul>
    </section>

    <section id="func">
      <h2>2.4. Требования к функциональности (F)</h2>

      <h3>F1. Управление инвентарём</h3>
      <ul>
        <li>F1.1 Добавление/редактирование/удаление единиц инвентаря.</li>
        <li>F1.2 Изменение статусов: «доступен», «в аренде», «на обслуживании».</li>
        <li>F1.3 Просмотр перечня инвентаря с фильтрами (категория, статус).</li>
      </ul>

      <h3>F2. Управление клиентами</h3>
      <ul>
        <li>F2.1 Ведение справочника клиентов (ФИО, контакты, документ).</li>
        <li>F2.2 Поиск по ФИО/телефону.</li>
      </ul>

      <h3>F3. Тарифы и расчёт</h3>
      <ul>
        <li>F3.1 Ведение тарифов: почасовой/посуточный/пакетный.</li>
        <li>F3.2 Расчёт стоимости аренды по фактическому времени с правилами округления (например, ≥ 30 мин округлять до часа).</li>
        <li>F3.3 Учёт скидок/штрафов (повреждение, просрочка).</li>
      </ul>

      <h3>F4. Оформление аренды</h3>
      <ul>
        <li>F4.1 Создание договора выдачи: выбор клиента, инвентаря, тарифа, предварительный расчёт.</li>
        <li>F4.2 Закрытие договора: фиксация возврата, перерасчёт, итог к оплате.</li>
        <li>F4.3 Просмотр истории аренды по клиенту и по инвентарю.</li>
      </ul>

      <h3>F5. Обслуживание/ремонты</h3>
      <ul>
        <li>F5.1 Регистрация записи ТО, блокировка инвентаря на время работ.</li>
        <li>F5.2 Завершение ТО и перевод в статус «доступен».</li>
      </ul>

      <h3>F6. Отчёты и выгрузки</h3>
      <ul>
        <li>F6.1 Отчёт о выручке за период.</li>
        <li>F6.2 Отчёт о загрузке инвентаря (время в аренде/в простое).</li>
        <li>F6.3 Экспорт выбранных данных в CSV/JSON.</li>
      </ul>

      <details>
        <summary>Mermaid-диаграмма функциональных блоков</summary>
        <pre class="mermaid">
flowchart TB
  subgraph Inventory[Управление инвентарём]
    F11[F1.1 CRUD] --> F12[Статусы]
    F12 --> F13[Фильтры]
  end
  subgraph Clients[Клиенты]
    F21[F2.1 CRUD] --> F22[Поиск]
  end
  subgraph Pricing[Тарифы и расчёт]
    F31[Тарифы] --> F32[Правила округления] --> F33[Скидки/штрафы]
  end
  subgraph Rental[Оформление аренды]
    F41[Выдача] --> F42[Закрытие] --> F43[История]
  end
  subgraph Service[ТО/ремонты]
    F51[Регистрация] --> F52[Завершение]
  end
  subgraph Reports[Отчёты/выгрузки]
    F61[Выручка] --> F62[Загрузка] --> F63[Экспорт]
  end
  Inventory --> Rental
  Clients --> Rental
  Pricing --> Rental
  Rental --> Reports
  Service --> Inventory
        </pre>
      </details>
    </section>

    <section id="nfunc">
      <h2>2.5. Нефункциональные требования (N)</h2>
      <ul>
        <li><strong>N1. Платформа.</strong> Язык C#, .NET LTS (6/8), автономное приложение (Console или Windows Forms).</li>
        <li><strong>N2. Производительность.</strong> N2.1 Время отклика основных операций ≤ 1 с на тестовом наборе до 1000 записей.</li>
        <li><strong>N3. Надёжность и целостность данных.</strong> N3.1 Валидация обязательных полей; запрет выдачи предмета со статусом ≠ «доступен». N3.2 Автосохранение при закрытии программы/операции.</li>
        <li><strong>N4. Удобство использования.</strong> Чёткое меню/формы, подтверждения критических действий.</li>
        <li><strong>N5. Безопасность (учебный режим).</strong> Локальное хранение; минимальный набор ПДн; опц. маскирование телефона.</li>
        <li><strong>N6. Совместимость.</strong> Windows 10/11; без интернета и внешних БД.</li>
        <li><strong>N7. Поддерживаемость/качество кода.</strong> Структурирование, комментарии к ключевым местам, читаемые имена.</li>
      </ul>
    </section>

    <section id="data">
      <h2>2.6. Требования к входным и выходным данным (D)</h2>
      <p><strong>D1. Хранилище:</strong> локальные файлы JSON (основной вариант) или CSV (экспорт/импорт).</p>

      <h3>D2. Структуры данных (минимальный состав полей)</h3>

      <h4>D2.1 InventoryItem (<code>items.json</code>)</h4>
      <table>
        <thead><tr><th>Поле</th><th>Тип</th><th>Ограничения / пример</th><th>Назначение</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>string</td><td>GUID</td><td>Уникальный идентификатор</td></tr>
          <tr><td>invNumber</td><td>string</td><td>обяз., шаблон <code>INV-0001</code></td><td>Инвентарный номер</td></tr>
          <tr><td>category</td><td>string</td><td>обяз.</td><td>Велосипед/Ролики/Лыжи и т.п.</td></tr>
          <tr><td>condition</td><td>string</td><td>обяз.</td><td>Новое/Хорошее/Требует ремонта</td></tr>
          <tr><td>status</td><td>string</td><td>обяз.</td><td><code>available</code>/<code>rented</code>/<code>maintenance</code></td></tr>
          <tr><td>lastServiceAt</td><td>date</td><td>опц.</td><td>Дата последнего ТО</td></tr>
        </tbody>
      </table>

      <h4>D2.2 Customer (<code>customers.json</code>)</h4>
      <table>
        <thead><tr><th>Поле</th><th>Тип</th><th>Ограничения / пример</th><th>Назначение</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>string</td><td>GUID</td><td>Уникальный идентификатор</td></tr>
          <tr><td>fullName</td><td>string</td><td>обяз.</td><td>ФИО</td></tr>
          <tr><td>phone</td><td>string</td><td>шаблон</td><td>Телефон</td></tr>
          <tr><td>docId</td><td>string</td><td>опц.</td><td>Документ (номер/серия)</td></tr>
        </tbody>
      </table>

      <h4>D2.3 Tariff (<code>tariffs.json</code>)</h4>
      <table>
        <thead><tr><th>Поле</th><th>Тип</th><th>Ограничения / пример</th><th>Назначение</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>string</td><td>GUID</td><td>Уникальный идентификатор</td></tr>
          <tr><td>name</td><td>string</td><td>—</td><td>Название тарифа</td></tr>
          <tr><td>mode</td><td>enum</td><td><code>hour</code>/<code>day</code>/<code>package</code></td><td>Режим тарифа</td></tr>
          <tr><td>rate</td><td>decimal</td><td>&ge; 0</td><td>Базовая ставка</td></tr>
          <tr><td>roundRule</td><td>string</td><td>напр. <code>ceil_30min</code></td><td>Правила округления</td></tr>
        </tbody>
      </table>

      <h4>D2.4 Rental (<code>rentals.json</code>)</h4>
      <table>
        <thead><tr><th>Поле</th><th>Тип</th><th>Ограничения / пример</th><th>Назначение</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>string</td><td>GUID</td><td>Уникальный идентификатор</td></tr>
          <tr><td>itemId</td><td>string</td><td>GUID</td><td>Связь с <code>InventoryItem</code></td></tr>
          <tr><td>customerId</td><td>string</td><td>GUID</td><td>Связь с <code>Customer</code></td></tr>
          <tr><td>tariffId</td><td>string</td><td>GUID</td><td>Связь с <code>Tariff</code></td></tr>
          <tr><td>startAt</td><td>datetime</td><td>—</td><td>Время выдачи</td></tr>
          <tr><td>endAt</td><td>datetime</td><td>опц.</td><td>Время возврата</td></tr>
          <tr><td>baseAmount</td><td>decimal</td><td>—</td><td>Базовая сумма</td></tr>
          <tr><td>discount</td><td>decimal</td><td>—</td><td>Скидка</td></tr>
          <tr><td>penalty</td><td>decimal</td><td>—</td><td>Штраф</td></tr>
          <tr><td>total</td><td>decimal</td><td>—</td><td>Итог к оплате</td></tr>
          <tr><td>status</td><td>enum</td><td><code>open</code>/<code>closed</code></td><td>Статус договора</td></tr>
        </tbody>
      </table>

      <h4>D2.5 Maintenance (<code>maintenance.json</code>)</h4>
      <table>
        <thead><tr><th>Поле</th><th>Тип</th><th>Ограничения / пример</th><th>Назначение</th></tr></thead>
        <tbody>
          <tr><td>id</td><td>string</td><td>GUID</td><td>Уникальный идентификатор</td></tr>
          <tr><td>itemId</td><td>string</td><td>GUID</td><td>Связь с <code>InventoryItem</code></td></tr>
          <tr><td>date</td><td>date</td><td>—</td><td>Дата работ</td></tr>
          <tr><td>work</td><td>string</td><td>—</td><td>Вид работ</td></tr>
          <tr><td>note</td><td>string</td><td>—</td><td>Комментарий</td></tr>
        </tbody>
      </table>

      <p><strong>D3. Ввод/вывод:</strong> ввод — формы/меню: создание/редактирование сущностей, выбор из списков. Вывод — таблицы/списки, детальные карточки, суммарные отчёты; экспорт CSV/JSON.</p>

      <details>
        <summary>Mermaid ER (иллюстративно)</summary>
        <pre class="mermaid">
erDiagram
  Customer ||--o{ Rental : rents
  InventoryItem ||--o{ Rental : booked
  Tariff ||--o{ Rental : priced_by
  Rental ||--o{ Payment : paid_by
  InventoryItem ||--o{ Maintenance : serviced_by
        </pre>
      </details>
    </section>

    <section id="ui">
      <h2>2.7. Требования к интерфейсу пользователя (UI)</h2>
      <ul>
        <li>Консольный вариант: главное меню (Инвентарь/Клиенты/Аренда/ТО/Отчёты/Экспорт/Выход), подменю и подтверждения.</li>
        <li>Windows Forms (по желанию): вкладки или навигация слева, формы с валидацией (обязательные поля отмечены).</li>
        <li>Сообщения об ошибках — информативные, без технических трассировок.</li>
      </ul>
    </section>

    <section id="limits">
      <h2>2.8. Ограничения и допущения</h2>
      <ul>
        <li>Один договор = одна единица инвентаря (упрощение учебной модели).</li>
        <li>Конкурентный доступ не моделируется; проверка статуса предотвращает двойную выдачу.</li>
        <li>Денежные расчёты без интеграции с эквайрингом.</li>
      </ul>
    </section>

    <section id="ops">
      <h2>2.9. Условия эксплуатации</h2>
      <table>
        <tbody>
          <tr><th>Аппаратные</th><td>ПК/ноутбук с 4 ГБ ОЗУ и выше</td></tr>
          <tr><th>Программные</th><td>Windows 10/11, .NET 6/8 Runtime/SDK, локальные права записи в каталог приложения</td></tr>
          <tr><th>Установка</th><td>распаковка дистрибутива, запуск исполняемого файла либо сборка из исходников в Visual Studio/VS Code</td></tr>
          <tr><th>Резервирование</th><td>периодическое копирование каталога данных (папка <code>data/</code>)</td></tr>
          <tr><th>Режим</th><td>эксплуатация офлайн, доступ к интернету не обязателен</td></tr>
        </tbody>
      </table>
    </section>

    <section id="delivery">
      <h2>2.10. Состав и структура поставки</h2>
      <ul>
        <li>Исходные коды (<code>*.cs</code>, <code>*.sln</code>);</li>
        <li>Сборка (<code>exe</code>) — для Windows Forms-проекта;</li>
        <li>Файлы данных (<code>/data/*.json</code>);</li>
        <li>Руководство пользователя (краткое);</li>
        <li>Отчёт по проекту (docx/pdf).</li>
      </ul>
    </section>

    <section id="reliab">
      <h2>2.11. Требования к надёжности и защите данных</h2>
      <ul>
        <li>Валидация ввода.</li>
        <li>Обработка исключений (недоступность файла, некорректный формат).</li>
        <li>Атомарность операций записи (временный файл + замена).</li>
      </ul>
    </section>

    <section id="qa">
      <h2>2.12. Контроль качества и приёмка (критерии)</h2>
      <ol>
        <li>K1. Функциональность: реализованы F1–F6 согласно разделу 2.4.</li>
        <li>K2. Корректность расчётов: тест-кейсы на границах времени (59/60/61 мин; 23:59/00:01) проходят без ошибок.</li>
        <li>K3. Удобство: все критические действия подтверждаются, ошибки — с понятными сообщениями.</li>
        <li>K4. Данные: все обязательные поля валидируются; запрет выдачи при статусе ≠ «доступен».</li>
        <li>K5. Качество кода: структура классов, комментарии к ключевым методам, читаемые имена.</li>
        <li>K6. Отчётность: отчёты строятся корректно на тестовом наборе; экспорт CSV работает.</li>
        <li>K7. Документация: отчёт содержит все разделы, скриншоты/листинги, результаты тестов.</li>
      </ol>
    </section>

    <section id="rtm">
      <h2>2.13. Матрица трассируемости (фрагмент)</h2>
      <table>
        <thead>
          <tr><th>ID требования</th><th>Описание</th><th>Проверка</th></tr>
        </thead>
        <tbody>
          <tr><td>F1.2</td><td>Перевод статусов инвентаря</td><td>Тест TC-INV-02 (смена доступен→в аренде)</td></tr>
          <tr><td>F3.2</td><td>Округление ≥ 30 мин до часа</td><td>Тест TC-CALC-05 (пример 1ч29м → 2 часа)</td></tr>
          <tr><td>F4.2</td><td>Перерасчёт при закрытии</td><td>Тест TC-RENT-07 (ночной возврат)</td></tr>
          <tr><td>F6.1</td><td>Выручка за период</td><td>Тест TC-RPT-01 (периодический отчёт)</td></tr>
          <tr><td>N2.1</td><td>Отклик ≤ 1 с</td><td>Замер на тестовом наборе (скрипт/ручной)</td></tr>
        </tbody>
      </table>
    </section>

    <section id="handoff">
      <h2>2.14. Порядок сдачи и приёмки</h2>
      <ul>
        <li>Демонстрация работы на наборе тестовых данных.</li>
        <li>Предоставление отчёта, исходников и собранного приложения (если применимо).</li>
        <li>Подписание листа приёмки (учебная форма) при выполнении критериев K1–K7.</li>
      </ul>
    </section>
  </div>
</body>
</html>
