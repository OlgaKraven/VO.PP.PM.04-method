<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Методические рекомендации — Прокат спортивного инвентаря</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- ваш стиль -->
  <link rel="stylesheet" href="styles.css" />

  <!-- границы таблиц (на всякий случай, если добавите таблицы) -->
  <style>
    table { width: 100%; border-collapse: collapse; margin: 10px 0; }
    th, td { border: 1px solid #cccccc; padding: 6px 8px; vertical-align: top; }
    th { background: #f5f5f7; text-align: left; }
    caption { caption-side: top; text-align: left; font-weight: bold; margin: 6px 0; }
  </style>

  <!-- Mermaid -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      securityLevel: 'loose'
    });
  </script>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Методические рекомендации</h1>
      <div class="subtitle">Учебный кейс: пункт проката спортивного инвентаря</div>
      <nav>
        <a href="#desc">1. Описание предметной области</a>
        <a href="#context">1.1 Контекст и проблема</a>
        <a href="#goals">1.2 Цель и задачи</a>
        <a href="#stake">1.3 Стороны</a>
        <a href="#bp">1.4 Бизнес-процессы</a>
        <a href="#boundaries">1.5 Границы</a>
        <a href="#entities">1.6 Сущности</a>
        <a href="#limits">1.7 Ограничения</a>
        <a href="#kpi">1.8 Показатели</a>
        <a href="#risks">1.9 Риски</a>
        <a href="#why">1.10 Обоснование</a>
      </nav>
    </header>

    <section id="desc">
      <h2>1. Описание предметной области</h2>
    </section>

    <section id="context">
      <h3>1.1. Контекст и проблема</h3>
      <p>Пункты проката спортивного инвентаря обслуживают физлиц, предоставляя оборудование на ограниченный срок по тарифу (почасово/посуточно/пакеты). В отсутствие автоматизации типичны проблемы:</p>
      <ul>
        <li>высокая доля ручных операций (бумажные бланки, Excel-файлы), что увеличивает ошибки учета;</li>
        <li>затруднённый контроль доступности единиц инвентаря «здесь и сейчас»;</li>
        <li>сложности с расчётом стоимости при комбинированных тарифах, штрафах за просрочку и повреждения;</li>
        <li>недостаточная прозрачность истории выдач и обслуживания (ТО/ремонты);</li>
        <li>ограниченные отчёты по выручке, загрузке инвентаря и пиковым периодам.</li>
      </ul>
    </section>

    <section id="goals">
      <h3>1.2. Цель и задачи автоматизации</h3>
      <p><strong>Цель:</strong> обеспечить оперативный и достоверный учёт аренды, сократить ошибки и время обслуживания клиента, повысить управляемость запасом и выручкой.</p>
      <p><strong>Задачи:</strong></p>
      <ul>
        <li>вести реестр инвентаря, статусов (доступен/в аренде/на обслуживании) и технических отметок;</li>
        <li>оформлять аренду (договор/заказ) с расчётом стоимости по тарифной сетке и правилам округления;</li>
        <li>учитывать возврат, доплаты/штрафы, продления;</li>
        <li>формировать базовые отчёты (выручка за период, загрузка, ТО/ремонты);</li>
        <li>обеспечивать минимальную прослеживаемость по клиенту и единице инвентаря.</li>
      </ul>
    </section>

    <section id="stake">
      <h3>1.3. Заинтересованные стороны и потребности</h3>
      <ul class="kv">
        <li><strong>Администратор пункта:</strong> быстрый поиск свободного инвентаря, оформление/закрытие аренды, печать/экспорт чеков.</li>
        <li><strong>Менеджер (владелец):</strong> сводные отчёты (выручка, средняя длительность аренды, ТО), контроль остатков и сезонного спроса.</li>
        <li><strong>Мастер по обслуживанию:</strong> планирование и фиксация ТО/ремонтов, блокировка инвентаря на время работ.</li>
        <li><strong>Клиент:</strong> прозрачные условия тарифа, быстрый расчёт стоимости, подтверждение операции.</li>
        <li><strong>Бухгалтер/оператор отчётности (опционально):</strong> выгрузки по оплатам и скидкам.</li>
      </ul>
    </section>

    <section id="bp">
      <h3>1.4. Основные бизнес-процессы (high-level)</h3>

      <pre class="mermaid">
flowchart TB
  %% Узлы
  subgraph BP1[BP1. Приём и выдача]
    A1[Идентификация клиента]
    A2[Выбор инвентаря]
    A3[Проверка доступности]
    A4[Выбор тарифа/скидок]
    A5[Предварительный расчёт]
    A6[Выдача]
    A1 --> A2 --> A3 --> A4 --> A5 --> A6
  end

  subgraph BP2[BP2. Возврат и закрытие]
    B1[Приём инвентаря]
    B2[Фиксация состояния]
    B3[Перерасчёт по факту]
    B4[Доплаты/штрафы]
    B5[Закрытие договора]
    B1 --> B2 --> B3 --> B4 --> B5
  end

  subgraph BP3[BP3. Обслуживание]
    C1[Регистрация заявки ТО/ремонта]
    C2[Статус: на обслуживании]
    C3[Выполнение работ]
    C4[Возврат в пул]
    C1 --> C2 --> C3 --> C4
  end

  subgraph BP4[BP4. Аналитика]
    D1[Формирование отчётов]
    D2{Срезы: период/категория/единица/клиент}
    D1 --> D2
  end
      </pre>
    </section>

    <section id="boundaries">
      <h3>1.5. Границы системы и интерфейсы</h3>
      <p>В учебной версии система автономна, без интеграций с эквайрингом или складскими WMS. Внешние интерфейсы ограничены файловыми операциями (импорт/экспорт CSV/JSON). Возможное расширение — подключение оплат и печати фискальных чеков (за рамками текущей практики).</p>
      <pre class="mermaid">
flowchart LR
  ext1[(CSV/JSON импорт)]
  ext2[(CSV/JSON экспорт)]

  subgraph System[УЧЕБНАЯ СИСТЕМА ПРОКАТА]
    UI[UI/Админ-панель]
    Core[Модуль аренды и расчёта тарифов]
    Repo[(Локальное хранилище / БД)]
  end

  ext1 --> UI --> Core --> Repo
  Repo --> ext2
      </pre>
    </section>

    <section id="entities">
      <h3>1.6. Ключевые сущности (для последующего проектирования)</h3>
      <ul>
        <li><strong>InventoryItem</strong> (Единица инвентаря): инв. номер, категория, состояние, статус, дата последнего ТО.</li>
        <li><strong>Customer</strong> (Клиент): ФИО, контактные данные, документ (номер/серия).</li>
        <li><strong>RentalAgreement</strong> (Аренда/договор): номер, клиент, инвентарь, время выдачи/возврата, тариф, суммы, штрафы.</li>
        <li><strong>Tariff</strong> (Тариф): тип (час/сутки/пакет), базовая ставка, правила округления/перерасчёта.</li>
        <li><strong>MaintenanceRecord</strong> (Запись ТО/ремонта): дата, вид работ, исполнитель, комментарии.</li>
        <li><strong>Payment</strong> (Оплата): способ, сумма, дата/время, привязка к договору.</li>
      </ul>

      <pre class="mermaid">
erDiagram
  Customer ||--o{ RentalAgreement : "оформляет"
  InventoryItem ||--o{ RentalAgreement : "выдаётся по"
  Tariff ||--o{ RentalAgreement : "расчёт по"
  RentalAgreement ||--o{ Payment : "оплата"
  InventoryItem ||--o{ MaintenanceRecord : "имеет"

  Customer {
    int id PK
    string full_name
    string email
    string phone
    string doc_series
    string doc_number
  }
  InventoryItem {
    int id PK
    string inv_code
    string category
    string condition
    string status
    date last_maintenance_date
  }
  Tariff {
    int id PK
    string type  "hour/day/package"
    decimal base_rate
    string rounding_rules
    string recalculation_rules
  }
  RentalAgreement {
    int id PK
    int customer_id FK
    int item_id FK
    int tariff_id FK
    datetime start_at
    datetime planned_end_at
    datetime actual_end_at
    decimal amount
    decimal penalties
  }
  Payment {
    int id PK
    int rental_id FK
    string method
    decimal amount
    datetime paid_at
  }
  MaintenanceRecord {
    int id PK
    int item_id FK
    date work_date
    string work_type
    string performer
    string comment
  }
      </pre>
    </section>

    <section id="limits">
      <h3>1.7. Ограничения и допущения</h3>
      <ul>
        <li>Один договор — одна единица инвентаря (для упрощения учебной модели).</li>
        <li>Учёт времени — поминутный, тариф округляет по правилам (напр., до 30 мин — как час).</li>
        <li>Денежные операции моделируются, фактическая интеграция с оплатой отсутствует.</li>
        <li>Персональные данные хранятся в рамках учебной задачи (минимально необходимые атрибуты).</li>
        <li>Конкурентный доступ (двойная выдача одной единицы) в учебной версии не моделируется транзакционно; предотвращается проверкой статуса «доступен» при оформлении.</li>
      </ul>
    </section>

    <section id="kpi">
      <h3>1.8. Показатели эффективности (для оценки результата)</h3>
      <ul>
        <li>Время оформления аренды (цель: ≤ 2 мин).</li>
        <li>Доля ошибок расчёта (цель: 0 в рамках тестов).</li>
        <li>Полнота заполнения карточек (≥ 95%).</li>
        <li>Доступность актуального статуса инвентаря (100% в тестах).</li>
        <li>Корректность отчётов по выручке и загрузке (сверка с тестовыми данными).</li>
      </ul>
    </section>

    <section id="risks">
      <h3>1.9. Риски и меры</h3>
      <table>
        <caption>Риск-реестр (учебная версия)</caption>
        <thead>
          <tr>
            <th>Риск</th>
            <th>Мера</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Некорректный тарифный расчёт при пограничных интервалах</td>
            <td>Тест-кейсы на границах (59/60/61 мин; 23:59/00:01)</td>
          </tr>
          <tr>
            <td>Утери данных при закрытии программы</td>
            <td>Автосохранение и валидация</td>
          </tr>
          <tr>
            <td>Путаница статусов при ТО</td>
            <td>Запрет выдачи, если статус ≠ «доступен»</td>
          </tr>
          <tr>
            <td>Ошибка идентификации клиента</td>
            <td>Обязательные поля и форматные проверки</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="why">
      <h3>1.10. Обоснование выбора предметной области (justification)</h3>
      <ul>
        <li>покрывает полный цикл учебного проекта: анализ → ТЗ → проектирование (структурное и ООП) → реализация → тестирование → оценка качества;</li>
        <li>«естественно» требует CRUD, коллекции и обработку исключений;</li>
        <li>имеет чёткие сущности и связи, что упрощает создание UML-диаграмм и основных алгоритмов;</li>
        <li>допускает поэтапное усложнение (многоединичные договоры, динамические тарифы, отчёты), сохраняя базовую версию выполнимой в рамках практики;</li>
        <li>даёт материал для валидируемых тестов (временные интервалы, тарифные правила, статусы).</li>
      </ul>
    </section>
  </div>
</body>
</html>
